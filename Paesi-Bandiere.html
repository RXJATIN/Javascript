<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paesi</title>
</head>
<body>
    <h1>Selezione a cascata</h1>
    <div>
        Paesi:
        <select id="paesi" onchange="setColori(this.value)">
            <option value="">-- Scegli il paese --</option>
        </select>
    </div>
    <div>
        Colore Bandiera:
        <select id="colori" onchange="setOggetti(this.value)"></select>
    </div>
    <div>
        Oggetti:
        <select id="oggetti"></select>
    </div>
</body>

<script>

    const elenco = {
        "Italia": ["Verde","Bianco","Rosso"],
        "Germania": ["Nero","Giallo","Rosso"],
        "Brasile": ["Verde","Giallo","Blu"]
    }  
    const listaoggetti = {
        "Verde": ["Mela-Verde","Smeraldo","Foglia"],
        "Bianco": ["Neve","Riso","Latte"],
        "Rosso": ["Fuoco","Rosa","Peperoncino"],
        "Blu": ["Mare","Cielo","Orchidea"],
        "Giallo": ["Sole","Limone","Grano"],
        "Nero": ["Inchiostro","Buio","Puma"]
    }
    let paesi = document.getElementById("paesi");
    let colori = document.getElementById("colori");
    let oggetti = document.getElementById("oggetti"); 

    function getPaesi() {
        for (var x in elenco) {
            paesi.options[paesi.options.length] = new Option(x);
        }
    }
    function getColori() {
        for (var x in elenco) {
            colori.options[colori.options.length] = new Option(x);
        }
    }
    function cleanSelect() {
        for(x in colori.options) {
            colori.remove(x);
        }      
    }
    function cleanSelect2() {
        for(x in oggetti.options) {
            oggetti.remove(x);
        }       
    }
    
    function setColori(paese) {
        cleanSelect();
        for (var x in elenco) {
            if(x == paese) {
                for(y in elenco[x] ) {
                    console.log(y)
                    colori.options[colori.options.length] = new Option(elenco[x][y]);
                }               
            }            
        }
    }
    function setOggetti(colore) {
        cleanSelect2();
        for (var x in listaoggetti) {
            if(x == colore) {
                for(y in listaoggetti[x] ) {
                    console.log(y)
                    oggetti.options[oggetti.options.length] = new Option(listaoggetti[x][y]);
                }               
            }            
        }
    }
    
    getPaesi();
    getColori();

</script>

</html>
